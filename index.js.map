{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImg(searchName) {\n  const baseUrl = 'https://pixabay.com';\n  const endPoint = '/api';\n  const params = new URLSearchParams({\n    key: '48897316-c1284323f9ede48e892c0fd4f',\n    q: searchName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const response = await axios.get(baseUrl + endPoint + `?${params}`);\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n});\n\nexport function showGLR(arrPict) {\n  const gallery = document.querySelector('.gallery');\n\n  const markup = arrPict\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n            <a class='gallery-link' href=\"${image.largeImageURL}\">\n              <img class=\"li-img\"\n              src=\"${image.webformatURL}\" \n              alt=\"${image.tags}\"/> \n              <div class=\"li-text\">\n                <table class=\"table\">\n              <tr>\n                <td>Likes</td>\n                <td>Views</td>\n                <td>Comments</td>\n                <td>Downloads</td>\n              </tr>\n              <tr>\n                <td>${image.likes}</td>\n                <td>${image.views}</td>\n                <td>${image.comments}</td>\n                <td>${image.downloads}</td>\n              </tr>\n            </table>\n              \n                </div>\n              </a>\n            </li>\n            \n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('afterbegin', markup);\n\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImg } from './js/pixabay-api';\nimport { showGLR } from './js/render-functions';\n\nexport const form = document.querySelector('.form');\nconst input = document.querySelector('.input-search');\nconst waitMsg = document.querySelector('.wait-msg');\nconst loadBtn = document.querySelector('.load-btn');\nconst loadMsg = document.querySelector('.load-msg');\n\nlet searchName = '';\nlet page = null;\nlet total = 1;\nlet perPage = 40;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  document.querySelector('.gallery').innerHTML = '';\n\n  searchName = input.value.trim();\n  page = 1;\n\n  if (!searchName) {\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: `rgba(255, 255, 255, 1)`,\n      close: `true`,\n      position: 'topRight',\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Input search string',\n    });\n    return;\n  }\n  waitMsg.innerHTML =\n    '\"Wait, the image is loaded\" <span class=\"loader\"></span>';\n\n  try {\n    const result = await getImg(searchName, page, perPage);\n\n    showGLR(result.hits);\n\n    total = result.total;\n\n    if (result.hits.length == 0) {\n      iziToast.show({\n        backgroundColor: 'rgba(239, 64, 64, 1)',\n        messageColor: `rgba(255, 255, 255, 1)`,\n        close: `true`,\n        position: 'topRight',\n        title: 'Error',\n        titleColor: '#fff',\n        titleSize: '16px',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n  } catch {\n    waitMsg.textContent = 'Ups ...';\n  }\n\n  waitMsg.textContent = '';\n\n  checkBtnStatus();\n  form.reset();\n});\n\nloadBtn.addEventListener('click', async () => {\n  hideLoadBtn();\n  loadMsg.innerHTML =\n    '\"Wait, the image is loaded\" <span class=\"loader\"></span>';\n  page += 1;\n  checkBtnStatus();\n\n  const result = await getImg(searchName, page, perPage);\n  showGLR(result.hits);\n  loadMsg.textContent = '';\n  scroll();\n});\n\nfunction checkBtnStatus() {\n  const maxPage = Math.ceil(total / perPage);\n\n  if (page >= maxPage) {\n    hideLoadBtn();\n\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: `rgba(255, 255, 255, 1)`,\n      close: `true`,\n      position: 'topRight',\n\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'We are sorry, but you have reached the end of search results.',\n    });\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction showLoadBtn() {\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n  loadBtn.classList.add('hidden');\n}\n\nfunction scroll() {\n  const info = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  const height = info.height;\n  scrollBy({\n    behavior: 'smooth',\n    top: 2 * height,\n  });\n}\n"],"names":["getImg","searchName","baseUrl","endPoint","params","axios","lightbox","SimpleLightbox","showGLR","arrPict","gallery","markup","image","form","input","waitMsg","loadBtn","loadMsg","page","total","perPage","e","iziToast","result","checkBtnStatus","hideLoadBtn","scroll","maxPage","showLoadBtn","height"],"mappings":"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"}